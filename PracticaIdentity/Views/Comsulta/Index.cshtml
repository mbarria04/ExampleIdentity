@{
    ViewData["Title"] = "Consultas Menús";

}

<div class="row">
    <div class="col-md-12">
        <div class="card">
          
            <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">Tabla Menus</h5>
                <div class="d-flex gap-2">
                    <input type="text" id="txtnombre" class="form-control form-control-sm" placeholder="Ingrese Nombre">
                    <button id="btnConsultar" class="btn btn-primary btn-sm">Consultar</button>
                </div>
              


            </div>
            <div id="card-body-titular" class="card-body collapse show">
                <table id="tablaClientes" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Nombre</th>
                            <th>Apellido</th>
                            <th>Email</th>
                            <th>Telefono</th>
                            <th>Fecha Registro</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>




@section Scripts {
   


    <script>
        $(document).ready(function () {


          var table = $('#tablaClientes').DataTable({
            columns: [
                { data: 'id' },
                { data: 'nombre' },
                { data: 'apellido' },
                { data: 'email' },
                { data: 'telefono' },
                {
                    data: 'fechaRegistro',
                    render: function (data) {
                        return data ? new Date(data).toLocaleDateString() : '';
                    }
                },
                {
                    data: null,
                    render: function (data) {
                        return `<button class="btn btn-sm btn-info">Ver</button>`;
                    }
                }
            ]
        });

         $("#btnConsultar").click(function () {

            var nombre = $("#txtnombre").val().trim();

            // if (nombre === "") {
            //     toastr.warning("Debe ingresar un nombre");
            //     return;
            // }
          if (nombre === "") {
            showAlert("Debe ingresar un nombre", "warning");
            return;
        }

            $.ajax({
                url: "/Clientes/Consultar",
                type: "GET",
                data: { NOMBRE: nombre }, // ✅ debe coincidir con el parámetro del método
                success: function (data) {
                    console.log("Datos recibidos:", data); // 👈 útil para depurar
                    table.clear().rows.add(data).draw();
                },
                error: function (xhr) {
                    toastr.error("Error: " + xhr.status);
                    console.log(xhr.responseText);
                }
            });
          });
        });
    </script>
}